(()=>{"use strict";const e=[["Esc","`","1","2","3","4","5","6","7","8","9","0","-","=","&#10229"],["Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Del"],["Caps","a","s","d","f","g","h","j","k","l",";","'","Enter"],["Shift","z","x","c","v","b","n","m",",",".","/","&#9650","Shift"],["Fn","Ctrl","Win","Alt"," ","Alt","Ctrl","&#9664","&#9660","&#9654","&#9776"]],s=[["Esc","~","!","@","#","$","%","^","&","*","(",")","_","+","&#10229"],["Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","|","Del"],["Caps","A","S","D","F","G","H","J","K","L",":",'"',"Enter"],["Shift","Z","X","C","V","B","N","M","<",">","?","&#9650","Shift"],["Fn","Ctrl","Win","Alt"," ","Alt","Ctrl","&#9664","&#9660","&#9654","&#9776"]];function t(e,t){e.forEach(((e,t)=>{e.innerHTML=s.flat()[t]})),t.forEach((e=>e.classList.add("pressed")))}function a(s,t){s.forEach(((s,t)=>{s.innerHTML=e.flat()[t]})),t.forEach((e=>e.classList.remove("pressed")))}function r(r){r.preventDefault();let c=document.querySelector(".input"),n=r.currentTarget.querySelector(".backspace"),l=r.currentTarget.querySelector(".tab"),i=r.currentTarget.querySelector(".caps"),o=r.key,d=r.currentTarget.querySelector(".space"),L=r.currentTarget.querySelector(".arrow-up"),p=r.currentTarget.querySelector(".arrow-down"),u=r.currentTarget.querySelector(".arrow-left"),y=r.currentTarget.querySelector(".arrow-right"),w=(r.currentTarget.querySelectorAll(".arrow"),r.currentTarget.querySelectorAll(".shift")),T=r.currentTarget.querySelectorAll(".key"),v=r.currentTarget.querySelectorAll(".withTwoValue"),f=document.querySelectorAll(".ctrl"),g=document.querySelectorAll(".alt"),h=[];v.forEach((e=>h.push(e.innerHTML))),console.log(("Q"===T[16].innerHTML||r.target.classList.contains("shift"))&&!r.target.classList.contains("caps")&&!T[30].classList.contains("pressed")&&"keyup"!==r.type&&r.repeat),console.log(r.type,r.repeat),r.target.classList.contains("shift")&&"q"===T[16].innerHTML&&!T[30].classList.contains("pressed")?t(T,w):"Q"!==T[16].innerHTML&&!r.target.classList.contains("shift")||r.target.classList.contains("caps")||!r.target.classList.contains("key")||T[30].classList.contains("pressed")||"click"!==r.type||"true"===r.repeat?r.target.classList.contains("caps")&&!r.target.classList.contains("pressed")?(w.forEach((e=>e.classList.remove("pressed"))),function(e,t){e.forEach(((e,t)=>{e.innerHTML=s.flat()[t]})),t.classList.add("pressed")}(T,i)):"keydown"!==r.type||["Escape","Tab","CapsLock","Shift","Control","Meta","Alt","Enter","Backspace","Delete"].includes(r.key)?r.target.classList.contains("caps")&&r.target.classList.contains("pressed")?function(s,t){s.forEach(((s,t)=>{s.innerHTML=e.flat()[t]})),t.classList.remove("pressed")}(T,i):"Shift"!==o||"q"!==T[16].innerHTML||T[30].classList.contains("pressed")||"keydown"!==r.type?"Shift"===o&&"keyup"===r.type?a(T,w):r.target.classList.contains("withTwoValue")||r.target.classList.contains("space")?c.value=c.value+r.target.innerHTML:r.target.classList.contains("tab")?c.value=c.value+d.innerHTML.repeat(3):r.target.classList.contains("backspace")?c.value=c.value.slice(0,-1):"Backspace"===o&&"keydown"===r.type?(c.value=c.value.slice(0,-1),n.classList.add("pressed")):"Backspace"===o&&"keyup"===r.type?n.classList.remove("pressed"):h.includes(o)&&"keydown"===r.type?(c.value=c.value+o,function(e,s,t){t.map(((t,a)=>{t===s&&e[a].classList.add("pressed")}))}(v,o,h)):h.includes(o)&&"keyup"===r.type?function(e,s,t){t.map(((t,a)=>{t===s&&e[a].classList.remove("pressed")}))}(v,o,h):r.target.classList.contains("arrow")?c.value=c.value+r.target.innerHTML:"ArrowUp"!==o&&"ArrowDown"!==o&&"ArrowLeft"!==o&&"ArrowRight"!==o||"keydown"!==r.type?"ArrowUp"!==o&&"ArrowDown"!==o&&"ArrowLeft"!==o&&"ArrowRight"!==o||"keyup"!==r.type?"Space"===r.code&&"keydown"===r.type?(c.value=c.value+" ",d.classList.add("pressed")):"Space"===r.code&&"keyup"===r.type?d.classList.remove("pressed"):"Tab"===o&&"keydown"===r.type?(c.value=c.value+d.innerHTML.repeat(3),l.classList.add("pressed")):"Tab"===o&&"keyup"===r.type?l.classList.remove("pressed"):(r.target.classList.contains("ctrl")||"Control"===o&&"keydown"===r.type)&&!r.target.classList.contains("pressed")?f.forEach((e=>e.classList.add("pressed"))):(r.target.classList.contains("alt")||"Alt"===o&&"keydown"===r.type)&&!r.target.classList.contains("pressed")?g.forEach((e=>e.classList.add("pressed"))):(r.target.classList.contains("ctrl")||"Control"===o&&"keyup"===r.type)&&!document.querySelector(".alt").classList.contains("pressed")?f.forEach((e=>e.classList.remove("pressed"))):(r.target.classList.contains("alt")||"Alt"===o&&"keyup"===r.type)&&!document.querySelector(".ctrl").classList.contains("pressed")?g.forEach((e=>e.classList.remove("pressed"))):((r.target.classList.contains("ctrl")||"Control"===o&&"keyup"===r.type)&&document.querySelector(".alt").classList.contains("pressed")||(r.target.classList.contains("alt")||"Alt"===o&&"keyup"===r.type)&&document.querySelector(".ctrl").classList.contains("pressed"))&&(f.forEach((e=>e.classList.remove("pressed"))),g.forEach((e=>e.classList.remove("pressed")))):"ArrowUp"===o?L.classList.remove("pressed"):"ArrowDown"===o?p.classList.remove("pressed"):"ArrowLeft"===o?u.classList.remove("pressed"):"ArrowRight"===o&&y.classList.remove("pressed"):"ArrowUp"===o?(c.value=c.value+"▲",L.classList.add("pressed")):"ArrowDown"===o?(c.value=c.value+"▼",p.classList.add("pressed")):"ArrowLeft"===o?(c.value=c.value+"◀",u.classList.add("pressed")):"ArrowRight"===o&&(c.value=c.value+"▶",y.classList.add("pressed")):t(T,w):c.value=c.value+r.key:(console.log("hello, Peter"),c.value=c.value+r.target.innerHTML,a(T,w))}!function(){const e=document.querySelector("body"),s=document.createElement("div");e.append(s),s.classList.add("container");const t=document.createElement("textarea");s.append(t),t.classList.add("input"),t.setAttribute("row","5"),t.setAttribute("cols","50");const a=document.createElement("div");s.append(a),a.classList.add("keyboard")}(),e.map(((e,s)=>function(e,s){const t=document.createElement("div");document.querySelector(".keyboard").append(t),t.classList.add("row"),t.classList.add(`row-${s}`),e.forEach((e=>{const s=document.createElement("div");t.append(s),s.classList.add("key"),s.innerHTML=`${e}`,function(e){"⟵"===e.innerHTML?e.classList.add("backspace"):"Esc"===e.innerHTML?e.classList.add("esc"):"Tab"===e.innerHTML?e.classList.add("tab"):"Del"===e.innerHTML?e.classList.add("del"):"Caps"===e.innerHTML?e.classList.add("caps"):"Enter"===e.innerHTML?e.classList.add("enter"):"Shift"===e.innerHTML?e.classList.add("shift"):"Fn"===e.innerHTML?e.classList.add("fn"):"Ctrl"===e.innerHTML?e.classList.add("ctrl"):"Win"===e.innerHTML?e.classList.add("win"):"Alt"===e.innerHTML?e.classList.add("alt"):"&#9776"===e.innerHTML?e.classList.add("menu"):"▲"===e.innerHTML?(e.classList.add("arrow-up"),e.classList.add("arrow"),e.classList.add("withTwoValue")):"◀"===e.innerHTML?(e.classList.add("arrow-left"),e.classList.add("arrow"),e.classList.add("withTwoValue")):"▼"===e.innerHTML?(e.classList.add("arrow-down"),e.classList.add("arrow"),e.classList.add("withTwoValue")):"▶"===e.innerHTML?(e.classList.add("arrow-right"),e.classList.add("arrow"),e.classList.add("withTwoValue")):" "===e.innerHTML?e.classList.add("space"):e.classList.add("withTwoValue")}(s)}))}(e,s))),document.querySelector(".keyboard").addEventListener("click",r),document.addEventListener("keydown",r),document.addEventListener("keyup",r)})();